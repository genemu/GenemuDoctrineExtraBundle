{% extends "GenemuDoctrineExtraBundle::base.html.twig" %}

{% block links %}
<link href="{{ asset('bundles/genemudoctrineextra/css/base.css') }}" rel="stylesheet" type="text/css" media="all" />
<link href="{{ asset('bundles/genemudoctrineextra/css/index.css') }}" rel="stylesheet" type="text/css" media="all" />
{% endblock links %}

{% block body %}
<ul class="routings">
    {% for routing in routings %}
        {% set publish = routing.publish?'Unpublish':'Publish' %}
        <li class="routing {{ loop.index is divisibleby(2)?'even':'odd' }}">
            <div class="description">
                <p class="index">
                    <strong>{{ routing.name }}:</strong>
                </p>
                <p class="name">
                    <strong class="option">{% trans %}patterns{% endtrans %}:</strong>
                    <span>{ </span>
                    {% for pattern in routing.patterns %}
                        <strong>{{ pattern.locale }}:</strong>
                        <span>{{ pattern.name }}{{ loop.last?'':', ' }}</span>
                    {% endfor %}
                    <span> }</span>
                </p>
                <p class="name">
                    <strong class="option">{% trans %}defaults{% endtrans %}:</strong>
                    <span>{ </span>
                    <strong>{% trans %}_controller{% endtrans %}:</strong>
                    <span>{{ routing.method }}</span>
                    {% for parameter in routing.parameters %}
                        {% if parameter.default %}
                            <span>, </span>
                            <strong>{{ parameter.name }}:</strong>
                            <span>{{ parameter.default }}</span>
                        {% endif %}
                    {% endfor %}
                    <span> }</span>
                </p>
                <p class="name">
                    <strong class="option">{% trans %}requirements{% endtrans %}:</strong>
                    <span>{ </span>
                    {% for parameter in routing.parameters %}
                        {% if parameter.requirement %}
                            <strong>{{ parameter.name }}:</strong>
                            <span>{{ parameter.requirement }}{{ loop.last?'':', ' }}</span>
                        {% endif %}
                    {% endfor %}
                    <span> }</span>
                </p>
                <p class="name">
                    <strong class="option">{% trans %}template{% endtrans %}:</strong>
                    <span>{{ routing.view }}</span>
                </p>
                {% if routing.cache and (routing.cache.public or routing.cache.expires or routing.cache.smaxage or routing.cache.maxage) %}
                <p class="name">
                    <strong class="option">{% trans %}cache{% endtrans %}:</strong>
                    <span>{ </span>
                    <strong>{% trans %}public{% endtrans %}:</strong>
                    <span>{{ routing.cache.public?'true':'false' }}</span>
                    {% if routing.cache.expires or routing.cache.smaxage or routing.cache.maxage %}
                        <span>, </span>
                    {% endif %}
                    {% if routing.cache.expires %}
                        <strong>{% trans %}expires{% endtrans %}:</strong>
                        <span>{{ routing.cache.expires|date('Y, d M') }}</span>
                        {% if routing.cache.smaxage or routing.cache.maxage %}
                            <span>, </span>
                        {% endif %}
                    {% endif %}

                    {% if routing.cache.smaxage %}
                        <strong>{% trans %}smaxage{% endtrans %}:</strong>
                        <span>{{ routing.cache.smaxage }}</span>
                        {% if routing.cache.maxage %}
                            <span>, </span>
                        {% endif %}
                    {% endif %}

                    {% if routing.cache.maxage %}
                        <strong>{% trans %}maxage{% endtrans %}:</strong>
                        <span>{{ routing.cache.maxage }}</span>
                    {% endif %}
                    <span> }</span>
                </p>
                {% endif %}
            </div>
            <div class="action">
                <a class="icon-32 moveup" title="{% trans %}Move up{% endtrans %}" href="{{ path('routing_move', {'id': routing.id, 'type': 'up'}) }}">
                    {% trans %}MoveUp{% endtrans %}
                </a>
                <a class="icon-32 movedown" title="{% trans %}Move down{% endtrans %}" href="{{ path('routing_move', {'id': routing.id, 'type': 'down'}) }}">
                    {% trans %}MoveDown{% endtrans %}
                </a>
                <a class="icon-32 {{ publish|lower }}" title="{{ publish|trans }}" href="{{ path('routing_publish', {'id': routing.id}) }}">
                    {{ publish|trans }}
                </a>
                <a class="icon-32 edit" title="{% trans %}Edit{% endtrans %}" href="{{ path('routing_edit', {'id': routing.id}) }}">
                    {% trans %}Edit{% endtrans %}
                </a>
                <a class="icon-32 remove" onclick="return confirm('{% trans %}Confirm delete routing{% endtrans %}');" title="{% trans %}Remove{% endtrans %}" href="{{ path('routing_remove', {'id': routing.id}) }}">
                    {% trans %}Remove{% endtrans %}
                </a>
            </div>
        </li>
    {% endfor %}
</ul>
<div class="actions">
    <a href="{{ path('routing_new') }}" title="{% trans %}Add routing{% endtrans %}">
        <span class="icon-16 add"></span>
        <span>{% trans %}Add routing{% endtrans %}</span>
    </a>
</div>
{% endblock body %}
